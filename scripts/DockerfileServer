FROM golang:1.24.4-alpine3.22

# set up workdir
WORKDIR /server

RUN mkdir /server/bin

# install dependences
COPY ./go.mod .
COPY ./go.sum .
RUN go mod download


# compile app
COPY ./cmd ./cmd
COPY ./config ./config
COPY ./internal ./internal

CMD ["go", "build", "-o", "./bin/app", "./cmd/app/main.go"]
